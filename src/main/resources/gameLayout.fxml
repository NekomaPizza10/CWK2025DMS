<?xml version="1.0" encoding="UTF-8"?>

<?import com.comp2042.GameOverPanel?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.Group?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import java.net.URL?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.comp2042.GuiController"
            prefHeight="700" prefWidth="900"
            style="-fx-background-color: #1a1a1a;">
    <center>
        <HBox alignment="CENTER" spacing="20">
            <!-- Left Side: HOLD Box -->
            <VBox alignment="TOP_CENTER" spacing="15" style="-fx-background-color: transparent;">
                <padding>
                    <Insets top="50"/>
                </padding>

                <!-- HOLD Panel -->
                <VBox style="-fx-background-color: #000000; -fx-border-color: #ffffff; -fx-border-width: 3;">
                    <padding>
                        <Insets top="5" right="5" bottom="1" left="5"/>
                    </padding>
                    <Label text="HOLD" style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold; -fx-alignment: center;" maxWidth="Infinity">
                        <padding>
                            <Insets bottom="1"/>
                        </padding>
                    </Label>

                    <!-- Thin separator -->
                    <Region prefHeight="1" style="-fx-background-color: #333333;">
                        <VBox.margin><Insets top="5" bottom="5"/></VBox.margin>
                    </Region>

                    <!-- Wrap GridPane in StackPane for centering -->
                    <StackPane prefWidth="80" prefHeight="80" style="-fx-background-color: #000000;" alignment="CENTER">
                        <GridPane fx:id="holdPanel" hgap="0" vgap="0" alignment="CENTER"/>
                    </StackPane>

                </VBox>

                <!-- Stats Panel -->
                <VBox alignment="TOP_LEFT" spacing="15" style="-fx-padding: 20; -fx-background-color: rgba(0,0,0,0.5); -fx-background-radius: 5;">
                    <VBox spacing="5">
                        <Label fx:id="piecesLabel" text="PIECES"
                               style="-fx-text-fill: #888888; -fx-font-size: 12px; -fx-font-weight: bold;"/>
                        <Label fx:id="piecesValue" text="0"
                               style="-fx-text-fill: white; -fx-font-size: 28px; -fx-font-weight: bold;"/>
                    </VBox>

                    <VBox spacing="5">
                        <Label fx:id="linesLabel" text="LINES"
                               style="-fx-text-fill: #888888; -fx-font-size: 12px; -fx-font-weight: bold;"/>
                        <Label fx:id="linesValue" text="0/40"
                               style="-fx-text-fill: white; -fx-font-size: 28px; -fx-font-weight: bold;"/>
                    </VBox>

                    <VBox spacing="5">
                        <Label fx:id="timeLabel" text="TIME"
                               style="-fx-text-fill: #888888; -fx-font-size: 12px; -fx-font-weight: bold;"/>
                        <Label fx:id="timeValue" text="0:00.000"
                               style="-fx-text-fill: white; -fx-font-size: 28px; -fx-font-weight: bold;"/>
                    </VBox>
                </VBox>
            </VBox>

            <!-- Center: Game Board -->
            <VBox alignment="CENTER">
                <StackPane alignment="CENTER" style="-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.8), 20, 0, 0, 0);">
                    <VBox style="-fx-border-color: #ffffff; -fx-border-width: 2; -fx-background-color: #000000; -fx-padding: 0;">
                        <StackPane alignment="TOP_LEFT">
                            <!-- Background grid -->
                            <GridPane fx:id="gamePanel"
                                      alignment="CENTER"
                                      hgap="0" vgap="0"
                                      style="-fx-background-color: #000000;"/>

                            <!-- Overlay pane for moving brick -->
                            <Pane fx:id="brickPaneContainer"
                                  prefWidth="200" prefHeight="675"
                                  minWidth="200" minHeight="675"
                                  maxWidth="200" maxHeight="675"
                                  style="-fx-background-color: transparent;"
                                  mouseTransparent="true">
                                <GridPane fx:id="brickPanel"
                                          hgap="0" vgap="0"/>
                            </Pane>

                            <Group fx:id="groupNotification"/>

                            <!-- Countdown Label -->
                            <StackPane fx:id="countdownPanel"
                                       visible="false"
                                       style="-fx-background-color: rgba(0, 0, 0, 0.8);"
                                       alignment="CENTER">

                                <Label fx:id="countdownLabel"
                                       style="-fx-text-fill: white;
                                              -fx-font-size: 80px;
                                              -fx-font-weight: bold;
                                              -fx-effect: dropshadow(gaussian, black, 20, 0.5, 0, 0);"/>
                            </StackPane>

                            <GameOverPanel fx:id="gameOverPanel"
                                           visible="false"
                                           style="-fx-background-color: rgba(0, 0, 0, 0.85);"/>
                        </StackPane>
                    </VBox>
                </StackPane>
            </VBox>

            <!-- Right Side: NEXT Box -->
            <VBox alignment="TOP_CENTER" spacing="0" style="-fx-background-color: transparent;">
                <padding>
                    <Insets top="50"/>
                </padding>

                <VBox style="-fx-background-color: #000000; -fx-border-color: #ffffff; -fx-border-width: 3;">
                    <padding>
                        <Insets top="5" right="10" bottom="5" left="10"/>
                    </padding>
                    <Label text="NEXT" style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold; -fx-alignment: center;" maxWidth="Infinity">
                        <padding>
                            <Insets bottom="5"/>
                        </padding>
                    </Label>

                    <!-- Thin separator -->
                    <Region prefHeight="1" style="-fx-background-color: #333333;">
                        <VBox.margin><Insets top="5" bottom="5"/></VBox.margin>
                    </Region>

                    <!-- Next Brick Preview 1 -->
                    <StackPane prefWidth="100" prefHeight="70" style="-fx-background-color: #000000;" alignment="CENTER">
                        <GridPane fx:id="nextPanel1" hgap="0" vgap="0" alignment="CENTER"/>
                    </StackPane>

                    <!-- Thin separator -->
                    <Region prefHeight="1" style="-fx-background-color: #333333;">
                        <VBox.margin><Insets top="3" bottom="3"/></VBox.margin>
                    </Region>

                    <!-- Next Brick Preview 2 -->
                    <StackPane prefWidth="100" prefHeight="70" style="-fx-background-color: #000000;" alignment="CENTER">
                        <GridPane fx:id="nextPanel2" hgap="0" vgap="0" alignment="CENTER"/>
                    </StackPane>
                    <Region prefHeight="1" style="-fx-background-color: #333333;">
                        <VBox.margin><Insets top="3" bottom="3"/></VBox.margin>
                    </Region>

                    <!-- Next Brick Preview 3 -->
                    <StackPane prefWidth="100" prefHeight="70" style="-fx-background-color: #000000;" alignment="CENTER">
                        <GridPane fx:id="nextPanel3" hgap="0" vgap="0" alignment="CENTER"/>
                    </StackPane>
                    <Region prefHeight="1" style="-fx-background-color: #333333;">
                        <VBox.margin><Insets top="3" bottom="3"/></VBox.margin>
                    </Region>

                    <!-- Next Brick Preview 4 -->
                    <StackPane prefWidth="100" prefHeight="70" style="-fx-background-color: #000000;" alignment="CENTER">
                        <GridPane fx:id="nextPanel4" hgap="0" vgap="0" alignment="CENTER"/>
                    </StackPane>
                    <Region prefHeight="1" style="-fx-background-color: #333333;">
                        <VBox.margin><Insets top="3" bottom="3"/></VBox.margin>
                    </Region>

                    <!-- Next Brick Preview 5 -->
                    <StackPane prefWidth="100" prefHeight="70" style="-fx-background-color: #000000;" alignment="CENTER">
                        <GridPane fx:id="nextPanel5" hgap="0" vgap="0" alignment="CENTER"/>
                    </StackPane>
                </VBox>
            </VBox>
        </HBox>
    </center>

    <stylesheets>
        <URL value="@window_style.css"/>
    </stylesheets>
</BorderPane>